{
    "id": "slurmrough",
    "containers": [
        {
          "id": "controller",
          "type": "service",
          "resources": {
            "cpus": 1,
            "mem": 1024,
            "disk": 1024
          },
          "network_mode": "host",
          "image": "scidas/slurm.controller:17.11.5",
          "is_privileged": true,
          "ports": [
            {
              "container_port": 10222,
              "protocol": "tcp"
            }
            ],
            "args": [
              "--use_slurmbdb", "true",
              "--cluster_name", "snowflake",
	      "--control_machine", "controller",
              "--slurmctld_port", "6817",
              "--slurmd_port", "6818",
              "--accounting_storage_host", "database",
              "--accounting_storage_port", "6819",
              "--compute_nodes", "worker01 worker02",
              "--partition_name", "docker",
              "--ssh_key", "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDeVecn1CAvFeOp+aECFq4WJ9pey/TINMzgqm1T9RuChGWn3ql9Kmk+Zwxm6XsPB3mJSX5G5Ut8//KDz/9PAIhwEq0/UDleDrzr6YHGsUPaZZzY+5PDeLcHxxUROyQBVHkdFp40Xrnla5FMorhz2ajeYoKei5S3YVe7fKMoIdBOkYJTz56i6JDHbirgWdPuc5zIH0T0aok7oADdvz6PqScyU9dLn56R6heCnZ9LB9aek4+pzV/MC6lXr4/ii5cfZT0TWVU0LEoLDr3zgZGFQFjKHcgzRDFW3ias/5p5tNmm1d0EKOaP3fZdDmC71XDdRtyJDkHUZVCp1qOXiyBNr4mV cole@cole-VirtualBox",
              "--ssh_port", "10022"
		]
        },
        {
          "id": "worker01",
          "type": "service",
          "network_mode": "container",
          "image": "cbmckni/slurm-sciapp-worker:latest",
          "resources": {
            "cpus": 4,
            "mem": 4096,
            "disk": 4096
          },
          "is_privileged": true,
          "args": [
            "--control_machine", "@controller",
            "--accounting_storage_host", "database",
            "--compute_nodes", "worker01 worker02"
          ]
        },
        {
          "id": "worker02",
          "type": "service",
          "network_mode": "container",
          "image": "cbmckni/slurm-sciapp-worker:latest",
          "resources": {
            "cpus": 4,
            "mem": 4096,
            "disk": 4096
          },
          "is_privileged": true,
          "args": [
            "--control_machine", "@controller",
            "--accounting_storage_host", "database",
            "--compute_nodes", "worker01 worker02"
          ]
        },
        {
          "id": "database",
          "type": "service",
          "resources": {
            "cpus": 1,
            "mem": 1024,
            "disk": 1024
          },
          "network_mode": "container",
          "image": "cbmckni/slurm-sciapp-db:latest",
          "is_privileged": true,
          "ports": [
            {
              "container_port": 10022,
              "protocol": "tcp"
            }
            ],
            "args": [
              "--dbd_addr", "database",
              "--dbd_host", "database",
              "--dbd_port", "6819",
              "--storage_host", "database.local.dev",
              "--storage_port", "3306",
              "--storage_pass", "password",
              "--storage_user", "slurm"
            ]
        },
        {
          "id": "gfs01",
          "type": "service",
          "network_mode": "container",
          "image": "gluster/gluster-centos",
          "resources": {
            "cpus": 1,
            "mem": 1024,
            "disk": 4096
          },
          "is_privileged": true
        },
        {
          "id": "gfs02",
          "type": "service",
          "network_mode": "container",
          "image": "gluster/gluster-centos",
          "resources": {
            "cpus": 1,
            "mem": 1024,
            "disk": 4096
          },
          "is_privileged": true
        }
    ]
}
